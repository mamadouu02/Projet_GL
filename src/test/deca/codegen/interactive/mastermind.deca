//jeu de mastermind interactif

#include "Math.decah"

class ColorList{
    int item1;
    int item2;
    int item3;
    int item4;

    int setItem(int item, int index)
    {
        if(item < 1 || item > 4)
        {
            println("Erreur : couleur invalide");
            return 1;
        }
        if(index < 1 || index > 4)
        {
            println("Erreur : index invalide");
            return 1;
        }
        if(index == 1)
        {
            item1 = item;
        }
        else if(index == 2)
        {
            item2 = item;
        }
        else if(index == 3)
        {
            item3 = item;
        }
        else if(index == 4)
        {
            item4 = item;
        }
        return 0;
    }

    int getItem(int index)
    {
        if(index == 1)
        {
            return item1;
        }
        else if(index == 2)
        {
            return item2;
        }
        else if(index == 3)
        {
            return item3;
        }
        else if(index == 4)
        {
            return item4;
        }
        else
        {
            println("Erreur : index invalide");
            return -1;
        }
    }
    void printColor(int color)
    {
        if(color == 0)
        {
            print("R");
        }
        else if(color == 1)
        {
            print("B");
        }
        else if(color == 2)
        {
            print("J");
        }
        else if(color == 3)
        {
            print("V");
        }
        else if(color == 4)
        {
            print("N");
        }
        else if(color == 5)
        {
            print("M");
        }
    }

    void printList()
    {
        printColor(item1);
        printColor(item2);
        printColor(item3);
        printColor(item4);
    }

    boolean equalsList(ColorList list)
    {
        int i = 1;
        while(i <= 4)
        {
            if(list.getItem(i) != getItem(i))
            {
                return false;
            }
            i = i + 1;
        }
        return true;
    }

    boolean contains(int item)
    {
        if(item1 == item || item2 == item || item3 == item || item4 == item)
        {
            return true;
        }
        else
        {
            return false;
        }
    }

}

class Mastermind
{
    ColorList proposition;
    ColorList solution;
    int nbEssais = 0;

    void initSolution()
    {
        int color; 
        int i = 1;

        while(i <= 4)
        {
            color = Math.getRandomNumber();
            solution.setItem(color, i);
            i = i + 1;

        }
        
    }

    void initProposition()
    {
        int color;
        int i = 1;
        println("Entrez votre proposition : ");
        while(i <= 4)
        {
            color = readInt();
            proposition.setItem(color, i);
            i = i + 1;
        }
    }

    void printSolution()
    {
        solution.printList();
    }

    void printProposition()
    {
        proposition.printList();
    }

    void printResult()
    {
        int i = 1;
        int j = 1;
        int nbBienPlace = 0;
        int nbMalPlace = 0;
        while(i <= 4)
        {
            if(proposition.getItem(i) == solution.getItem(i))
            {
                nbBienPlace = nbBienPlace + 1;
            }
            else if(solution.contains(proposition.getItem(i)))
            {
                nbMalPlace = nbMalPlace + 1;
            }
            i = i + 1;
        }
        println("Nombre de couleurs bien placees : " + nbBienPlace);
        println("Nombre de couleurs mal placees : " + nbMalPlace);
    }

    boolean isWin()
    {
        if(proposition.equalsList(solution))
        {
            return true;
        }
        else
        {
            return false;
        }
    }

    int play()
    {
        initSolution();
        while(nbEssais < 10)
        {
            initProposition();
            printResult();
            if(isWin())
            {
                println("Vous avez gagne !");
                return 1;
            }
            nbEssais = nbEssais + 1;
        }
        println("Vous avez perdu !");
        return 0;
    }
}

{
    Mastermind mastermind;
    mastermind.play();
}